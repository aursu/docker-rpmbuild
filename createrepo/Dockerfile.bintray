ARG rocky=8.9.20231119
ARG image=base
FROM aursu/rockylinux:${rocky}-${image}

RUN microdnf -y install \
		python39 \
		python39-rpm \
	&& microdnf clean all && rm -rf /var/cache/dnf /var/lib/rpm/__db*

COPY scripts/artifactory.py /usr/local/bin/artifactory.py
RUN chmod 755 /usr/local/bin/artifactory.py

VOLUME ${BUILD_TOPDIR}/RPMS

USER $BUILD_USER

CMD /usr/local/bin/artifactory.py -c ${BUILD_TOPDIR}/RPMS
