ARG rocky=10.1.20251126
ARG version=2.330.0
FROM aursu/rockylinux:${rocky}-actions-runner-${version}

ARG name=github-actions-runner
ARG runnergroup=Default
ARG labels="self-hosted,Linux,X64"
ARG work=_work

ENV GITHUB_URL=https://github.com/rpmbsys
# GITHUB_TOKEN can be empty - runner.py will fall back to GITHUB_PAT
# ENV GITHUB_TOKEN=

ENV RUNNER_NAME=$name
ENV RUNNER_GROUP=$runnergroup
ENV RUNNER_LABELS="${labels}"
ENV RUNNER_WORKSPACE=$work

VOLUME $RUNNER_HOME

# runner.py configure reads all config from ENV variables and passes --replace as extra arg
CMD $RUNNER_ROOT/runner.py configure --replace
